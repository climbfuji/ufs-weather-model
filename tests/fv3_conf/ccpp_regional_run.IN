rm -fr INPUT RESTART
mkdir INPUT RESTART
rsync -av @[RTPWD]/FV3_input_data_regional/ ./
if [ $WARM_START = .T. ]; then
  if [ $CCPP_SUITE = FV3_RRFS_v1alpha ]; then
    cp ../fv3_ccpp_regional_coldstart${RT_SUFFIX}/RESTART/* INPUT/
    cp ../fv3_ccpp_regional_coldstart${RT_SUFFIX}/INPUT/gfs_bndy.tile7.*.nc INPUT/
    cp ../fv3_ccpp_regional_coldstart${RT_SUFFIX}/INPUT/oro_data.tile7.halo4.nc INPUT/
  elif [ $CCPP_SUITE = FV3_GFS_v15p2 ]; then
    cp ../fv3_ccpp_regional_v15p2_coldstart${RT_SUFFIX}/RESTART/* INPUT/
    cp ../fv3_ccpp_regional_v15p2_coldstart${RT_SUFFIX}/INPUT/gfs_bndy.tile7.*.nc INPUT/
    cp ../fv3_ccpp_regional_v15p2_coldstart${RT_SUFFIX}/INPUT/oro_data.tile7.halo4.nc INPUT/
  else
    echo "ERROR, warm start runs not configured for CCPP_SUITE=${CCPP_SUITE}"
    exit 1
  fi
fi

# Copy field table, depending on microphysics choice
if [ $IMP_PHYSICS = 8 ]; then
  ln -sf diag_table.thompson diag_table
elif [ $IMP_PHYSICS = 11 ]; then
  ln -sf diag_table.gfdlmp diag_table
else
  echo "ERROR, no diag table configured for IMP_PHYSICS=${IMP_PHYSICS}"
  exit 1
fi

# Copy field table, depending on microphysics choice and whether MYNN/SATMEDMF is used
if [ $IMP_PHYSICS = 8 ]; then
  if [ $LTAEROSOL = .T. ]; then
    if [ $DO_MYNNEDMF = .T. ] || [ $SATMEDMF = .T. ]; then
      cp  @[RTPWD]/FV3_input_data_gsd/field_table_gsd field_table
    else
      cp  @[RTPWD]/FV3_input_data_gsd/field_table_gf_thompson field_table
    fi
  else
    if [ $DO_MYNNEDMF = .T. ] || [ $SATMEDMF = .T. ]; then
      echo "ERROR, no field table configured for Thompson MP without aerosols but with MYNN or SATMEDMF (need TKE)"
      exit 1
    else
      cp  @[RTPWD]/FV3_input_data_gsd/field_table_thompson_noaero field_table
    fi
  fi
elif [ $IMP_PHYSICS = 11 ]; then
  cp @[RTPWD]/FV3_input_data/field_table_gfdlmp field_table
else
  echo "ERROR, no field table configured for IMP_PHYSICS=${IMP_PHYSICS}"
  exit 1
fi
